
singularity {

    autoMounts=true
    enabled=true

}


simg = "/archive/code/containers/MRIQC/poldracklab_mriqc_0.14.2-2018-08-21-453030cc5a18.img"
invocation = "/projects/jjeyachandra/boutiques_jsons/default_invocation/mriqc-0.14.2_invocation.json"
descriptor = "/projects/jjeyachandra/boutiques_jsons/descriptors/mriqc-0.14.2.json"
license="/freesurfer/6.0.0/build/"

profiles {

    //DEFAULT
    standard {

        process.executor = "SLURM"
        process.queue = "high-moby"
        env.basedir = ""
        env.quarantine = "/opt/quarantine/"
    }   

    kimel {

        process.executor = "SLURM"
        process.queue = "high-moby"
        env.basedir = ""
        env.quarantine = "/KIMEL/quarantine/"
    }   

    scc {

        process.executor = "SLURM"
        process.queue = "short"
        env.basedir = "/KIMEL/tigrlab"
        env.quarantine = "/opt/quarantine/"
        params.simg = "/KIMEL/tigrlab/$simg"

    }

    local {
        process.executor = "local"
        env.basedir = ""
        env.quarantine = "/opt/quarantine/"
        params.simg = "$simg"

    }


}

params.application = "MRIQC"

process {
    withName: run_bids {
        
        
        errorStrategy = "retry"
        maxErrors = 3
        clusterOptions = "--time=4:00:00 --mem-per-cpu=2048\
         --cpus-per-task=4 --job-name mriqc_pipeline\
         --nodes=1"
                

    }
}
